reset

##### User defined!
#{_root_dir = "../"}
#{_Nelem = 30}
#{_suffix = 8}
#{_Nsmth = 0}
#{_out_file = "ARM-NSA_30_x" // tostring(_suffix)}

##### Only change if you re-organize the CUBIT directory
#{_script_dir = Quote(_root_dir // "scripts/")}
#{_in_dir = _root_dir // "CUB_files/"}
#{_out_dir = _root_dir // "exodus/"}

cd {_script_dir}

### Read in CUB file
#{_in_file = Quote(_in_dir // "ne30.cub")}
open {_in_file}

refine face  \
	 518 519 520 521 522 523 524 525 526 \
	 548 549 550 551 552 553 554 555 556 \
	 578 579 580 581 582 583 584 585 586 \
	 608 609 610 611 612 613 614 615 616 \
	 638 639 640 641 642 643 644 645 646 \
	 668 669 670 671 672 673 674 675 676 \
	 698 699 700 701 702 703 704 705 706 \
                 numsplit 1 depth 1

#{if (_suffix > 2)}
	refine face \
		 5441 5442 5445 5446 5449 5450 5453 5454 5457 5458 5461 5462 5465 5466 \
                                 5444 5443 5448 5447 5452 5451 5456 5455 5460 5459 5464 5463 5468 5467 \
		 5477 5478 5481 5482 5485 5486 5489 5490 5493 5494 5497 5498 5501 5502 \
                                 5480 5479 5484 5483 5488 5487 5492 5491 5496 5495 5500 5499 5504 5503 \
		 5513 5514 5517 5518 5521 5522 5525 5526 5529 5530 5533 5534 5537 5538 \
		 5516 5515 5520 5519 5524 5523 5528 5527 5532 5531 5536 5535 5540 5539 \
		 5549 5550 5553 5554 5557 5558 5561 5562 5565 5566 5569 5570 5573 5574 \
		 5552 5551 5556 5555 5560 5559 5564 5563 5568 5567 5572 5571 5576 5576 \
		 5585 5586 5589 5590 5593 5594 5597 5598 5601 5602 5605 5606 5609 5610 \
		 5588 5587 5592 5591 5596 5595 5600 5599 5604 5603 5608 5607 5612 5611 \
                numsplit 1 depth 1
#{endif}

#{if (_suffix > 4)}
	refine face \
                                 5765 5766 5784 5785 5781 5782 5800 5801 5797 5798 5816 5817 5813 5814 5832 5833 5829 5830 5848 5849 5845 5846 5864 5865 \
                                 5764 5763 5783 5786 5780 5779 5799 5802 5796 5795 5815 5818 5812 5811 5831 5834 5828 5827 5847 5850 5844 5843 5863 5866 \
                                 5874 5871 5883 5884 5890 5887 5899 5900 5906 5903 5915 5916 5922 5919 5931 5932 5938 5935 5947 5948 5954 5951 5963 5964 \
                                 5873 5872 5886 5885 5889 5888 5902 5901 5905 5904 5918 5917 5921 5920 5934 5933 5937 5936 5950 5949 5953 5952 5966 5965 \
                                 5877 5878 5896 5897 5893 5894 5912 5913 5909 5910 5928 5929 5925 5926 5944 5945 5941 5942 5960 5961 5957 5958 5976 5977 \
                                 5876 5875 5895 5898 5892 5891 5911 5914 5908 5907 5927 5930 5924 5923 5943 5946 5940 5939 5959 5962 5956 5955 5975 5978 \
                                 5986 5983 5995 5996 6002 5999 6011 6012 6018 6015 6027 6028 6034 6031 6043 6044 6050 6047 6059 6060 6066 6063 6075 6076 \
                                 5985 5984 5998 5997 6001 6000 6014 6013 6017 6016 6030 6029 6033 6032 6046 6045 6049 6048 6062 6061 6065 6064 6078 6077 \
                                 5989 5990 6008 6009 6005 6006 6024 6025 6021 6022 6040 6041 6037 6038 6056 6057 6053 6054 6072 6073 6069 6070 6088 6089 \
                                 5988 5987 6007 6010 6004 6003 6023 6026 6020 6019 6039 6042 6036 6035 6055 6058 6052 6051 6071 6074 6068 6067 6087 6090 \
                                 6098 6095 6107 6108 6114 6111 6123 6124 6130 6127 6139 6140 6146 6143 6155 6156 6162 6159 6171 6172 6178 6175 6187 6188 \
                                 6097 6096 6110 6109 6113 6112 6126 6125 6129 6128 6142 6141 6145 6144 6158 6157 6161 6160 6174 6173 6177 6176 6190 6189 \
                                 6101 6102 6120 6121 6117 6118 6136 6137 6133 6134 6152 6153 6149 6150 6168 6169 6165 6166 6184 6185 6181 6182 6200 6201 \
                                 6100 6099 6119 6122 6116 6115 6135 6138 6132 6131 6151 6154 6148 6147 6167 6170 6164 6163 6183 6186 6180 6179 6199 6202 \
                                 6210 6207 6219 6220 6226 6223 6235 6236 6242 6239 6251 6252 6258 6255 6267 6268 6274 6271 6283 6284 6290 6287 6299 6300 \
                                 6209 6208 6222 6221 6225 6224 6238 6237 6241 6240 6254 6253 6257 6256 6270 6269 6273 6272 6286 6285 6289 6288 6302 6301 \
                 numsplit 1 depth 1
#{endif}

#{if(_Nsmth>0)}
	#{include("smooth.jou")}
#{endif}

set large exodus file off
#{_efilename = Quote(_out_dir // _out_file // ".g")}
export genesis {_efilename} dimension 3 overwrite



