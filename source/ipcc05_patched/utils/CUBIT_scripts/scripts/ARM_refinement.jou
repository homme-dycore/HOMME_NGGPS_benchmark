reset

##### User defined!
#{_root_dir = "~/Desktop/grids/"}
#{_Nelem = 30}
#{_suffix = 8}
#{_Nsmth = 0}
#{_out_file = "ARM_30_x" // tostring(_suffix)}

##### Only change if you re-organize the CUBIT directory
#{_script_dir = Quote(_root_dir // "scripts/")}
#{_in_dir = _root_dir // "CUB_files/"}
#{_out_dir = _root_dir // "exodus/"}

cd {_script_dir}

### Read in CUB file
#{_in_file = Quote(_in_dir // "ne30.cub")}
open {_in_file}

refine face  \
                 661 2011 2012 2013 2014 2015 2016 \
                 631 2041 2042 2043 2044 2045 2046 \
                 601 2071 2072 2073 2074 2075 2076 \
                 571 2101 2102 2103 2104 2105 2106 \
                 541 2131 2132 2133 2134 2135 2136 \
                 511 2161 2162 2163 2164 2165 2166 \
                 481 2191 2192 2193 2194 2195 2196 \
                 451 2221 2222 2223 2224 2225 2226 \
                 421 2251 2252 2253 2254 2255 2256 \
                 numsplit 1 depth 1

#{if (_suffix > 2)}
	refine face 5461 5464 5485 5488 5509 5512 5533 5536 5557 5560 5581 5584 5605 5608 \
                                 5462 5463 5486 5487 5510 5511 5534 5535 5558 5559 5582 5583 5606 5607 \
                                 5465 5468 5489 5492 5513 5516 5537 5540 5561 5564 5585 5588 5609 5612 \
                                 5466 5467 5490 5491 5514 5515 5538 5539 5562 5563 5586 5587 5610 5611 \
                                 5469 5472 5493 5496 5517 5520 5541 5544 5565 5568 5589 5592 5613 5616 \
                                 5470 5471 5494 5495 5518 5519 5542 5543 5566 5567 5590 5591 5614 5615 \
                                 5473 5476 5497 5500 5521 5524 5545 5548 5569 5572 5593 5596 5617 5620 \
                                 5474 5475 5498 5499 5522 5523 5546 5547 5570 5571 5594 5595 5618 5619 \
                                 5477 5480 5501 5504 5525 5528 5549 5552 5573 5576 5597 5600 5621 5624 \
                                 5478 5479 5502 5503 5526 5527 5550 5551 5574 5575 5598 5599 5622 5623 \
                numsplit 1 depth 1
#{endif}

#{if (_suffix > 4)}
	refine face 5765 5764 5842 5841 5845 5844 5922 5921 5925 5924 6002 6001 6005 6004 6082 6081 6085 6084 6162 6161 6165 6164 6242 6241 \
                                 5766 5763 5839 5840 5846 5843 5919 5920 5926 5923 5999 6000 6006 6003 6079 6080 6086 6083 6159 6160 6166 6163 6239 6240 \
                                 5784 5783 5851 5854 5864 5863 5931 5934 5944 5943 6011 6014 6024 6023 6091 6094 6104 6103 6171 6174 6184 6183 6251 6254 \
                                 5785 5786 5852 5853 5865 5866 5932 5933 5945 5946 6012 6013 6025 6026 6092 6093 6105 6106 6172 6173 6185 6186 6252 6253 \
                                 5781 5780 5858 5857 5861 5860 5938 5937 5941 5940 6018 6017 6021 6020 6098 6097 6101 6100 6178 6177 6181 6180 6258 6257 \
                                 5782 5779 5855 5856 5862 5859 5935 5936 5942 5939 6015 6016 6022 6019 6095 6096 6102 6099 6175 6176 6182 6179 6255 6256 \
                                 5800 5799 5867 5870 5880 5879 5947 5950 5960 5959 6027 6030 6040 6039 6107 6110 6120 6119 6187 6190 6200 6199 6267 6270 \
                                 5801 5802 5868 5869 5881 5882 5948 5949 5961 5962 6028 6029 6041 6042 6108 6109 6121 6122 6188 6189 6201 6202 6268 6269 \
                                 5797 5796 5874 5873 5877 5876 5954 5953 5957 5956 6034 6033 6037 6036 6114 6113 6117 6116 6194 6193 6197 6196 6274 6273 \
                                 5798 5795 5871 5872 5878 5875 5951 5952 5958 5955 6031 6032 6038 6035 6111 6112 6118 6115 6191 6192 6198 6195 6271 6272 \
                                 5816 5815 5883 5886 5896 5895 5963 5966 5976 5975 6043 6046 6056 6055 6123 6126 6136 6135 6203 6206 6216 6215 6283 6286 \
                                 5817 5818 5884 5885 5897 5898 5964 5965 5977 5978 6044 6045 6057 6058 6124 6125 6137 6138 6204 6205 6217 6218 6284 6285 \
                                 5813 5812 5890 5889 5893 5892 5970 5969 5973 5972 6050 6049 6053 6052 6130 6129 6133 6132 6210 6209 6213 6212 6290 6289 \
                                 5814 5811 5887 5888 5894 5891 5967 5968 5974 5971 6047 6048 6054 6051 6127 6128 6134 6131 6207 6208 6214 6211 6287 6288 \
                                 5832 5831 5899 5902 5912 5911 5979 5982 5992 5991 6059 6062 6072 6071 6139 6142 6152 6151 6219 6222 6232 6231 6299 6302 \
                                 5833 5834 5900 5901 5913 5914 5980 5981 5993 5994 6060 6061 6073 6074 6140 6141 6153 6154 6220 6221 6233 6234 6300 6301 \
                 numsplit 1 depth 1
#{endif}

#{if(_Nsmth>0)}
	#{include("smooth.jou")}
#{endif}

set large exodus file off
#{_efilename = Quote(_out_dir // _out_file // ".g")}
export genesis {_efilename} dimension 3 overwrite


